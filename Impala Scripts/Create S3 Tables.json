[
{
  "pk": 111, 
  "model": "desktop.document2", 
  "fields": {
    "search": "show table stats daily_ipdr_traffic_hdfs_parquet_snappy", 
    "uuid": "60d52f80-b603-b526-ea84-4dc8abda122d", 
    "extra": "", 
    "type": "query-impala", 
    "description": "", 
    "is_history": false, 
    "parent_directory": [
      "6580c0fd-4fae-4454-83e6-f94235c6c18c", 
      1, 
      false
    ], 
    "is_managed": false, 
    "last_modified": "2017-11-22T08:47:01.039", 
    "version": 1, 
    "owner": [
      "ec2-user"
    ], 
    "dependencies": [], 
    "data": "{\"loadingHistory\": false, \"schedulerViewModel\": null, \"retryModalCancel\": null, \"schedulerViewModelIsLoaded\": false, \"historyTotalPages\": 3, \"id\": 111, \"snippets\": [{\"wasBatchExecuted\": false, \"chartLimits\": [5, 10, 25, 50, 100], \"associatedDocumentLoading\": true, \"isReady\": true, \"statement_raw\": \"/* Create external table pointing to IPDR data in S3 */\\nDROP TABLE IF EXISTS daily_ipdr_traffic_csv;\\nCREATE EXTERNAL TABLE daily_ipdr_traffic_csv (\\n    cmtsdevice              string,\\n    address_resolution      string,\\n    creation_date           timestamp,\\n    cmmacaddress            string,\\n    hub_code                string,\\n    area_code               string,\\n    bytes_upstream          bigint,\\n    bytes_downstream        bigint,\\n    dxservicelevel          string,\\n    optical_rx              string,\\n    tpia                    string,\\n    service_class_pair_name string\\n) \\nPARTITIONED BY (creation_date_pk STRING)\\nROW FORMAT DELIMITED FIELDS TERMINATED BY ','\\nLOCATION 's3a://sgupta-s3/shaw/csv';\\n\\n/* Add partitions for each day */\\nALTER TABLE daily_ipdr_traffic_csv ADD PARTITION (creation_date_pk='2017-10-15') LOCATION 's3a://sgupta-s3/shaw/csv/2017-10-15';\\nALTER TABLE daily_ipdr_traffic_csv ADD PARTITION (creation_date_pk='2017-10-16') LOCATION 's3a://sgupta-s3/shaw/csv/2017-10-16';\\n\\n/* Refresh and stats is required when partitions are added */\\nREFRESH daily_ipdr_traffic_csv;\\nCOMPUTE STATS daily_ipdr_traffic_csv;\\nSHOW TABLE STATS daily_ipdr_traffic_csv;\\n\\n/* Create a new table stored as parquet */\\nDROP TABLE IF EXISTS daily_ipdr_traffic_parquet;\\nCREATE TABLE IF NOT EXISTS daily_ipdr_traffic_parquet\\n    LIKE daily_ipdr_traffic_csv\\n    STORED AS PARQUET\\n    LOCATION 's3a://sgupta-s3/shaw/parquet';\\n\\n/* Load data into parquet format */\\nSET COMPRESSION_CODEC=none;\\nINSERT INTO daily_ipdr_traffic_parquet PARTITION (creation_date_pk)\\nSELECT * FROM daily_ipdr_traffic_csv;\\n\\n/* Refresh and stats */\\nREFRESH daily_ipdr_traffic_parquet;\\nCOMPUTE STATS daily_ipdr_traffic_parquet;\\nSHOW TABLE STATS daily_ipdr_traffic_parquet;\\n\\n/* Create a new table stored as parquet with snappy compression */\\nDROP TABLE IF EXISTS daily_ipdr_traffic_parquet_snappy;\\nCREATE TABLE IF NOT EXISTS daily_ipdr_traffic_parquet_snappy\\n    LIKE daily_ipdr_traffic_csv\\n    STORED AS PARQUET\\n    LOCATION 's3a://sgupta-s3/shaw/snappy';\\n\\n/* Load data into parquet format with snappy compression */\\nSET COMPRESSION_CODEC=snappy;\\nINSERT INTO daily_ipdr_traffic_parquet_snappy PARTITION (creation_date_pk)\\nSELECT * FROM daily_ipdr_traffic_csv;\\n\\n/* Refresh and stats */\\nREFRESH daily_ipdr_traffic_parquet_snappy;\\nCOMPUTE STATS daily_ipdr_traffic_parquet_snappy;\\nSHOW TABLE STATS daily_ipdr_traffic_parquet_snappy;\\n\\n/* Create a new table stored as parquet with gzip compression */\\nDROP TABLE IF EXISTS daily_ipdr_traffic_parquet_gzip;\\nCREATE TABLE IF NOT EXISTS daily_ipdr_traffic_parquet_gzip\\n    LIKE daily_ipdr_traffic_csv\\n    STORED AS PARQUET\\n    LOCATION 's3a://sgupta-s3/shaw/gzip';\\n\\n/* Load data into parquet format */\\nSET COMPRESSION_CODEC=gzip;\\nINSERT INTO daily_ipdr_traffic_parquet_gzip PARTITION (creation_date_pk)\\nSELECT * FROM daily_ipdr_traffic_csv;\\n\\n/* Refresh and stats */\\nREFRESH daily_ipdr_traffic_parquet_gzip;\\nCOMPUTE STATS daily_ipdr_traffic_parquet_gzip;\\nSHOW TABLE STATS daily_ipdr_traffic_parquet_gzip;\\n\\n/* Sample Query */\\nSELECT creation_date,\\n    AVG(bytes_upstream) as avg_upstream,\\n    AVG(bytes_downstream) as avg_downstream\\nFROM daily_ipdr_traffic_hdfs_parquet_snappy\\nWHERE creation_date=cast('2017-10-16' as timestamp)\\n    AND cmtsdevice = 'dx10sj.wp'\\nGROUP BY creation_date\\nORDER BY avg_upstream DESC;\", \"statusForButtons\": \"executed\", \"showLogs\": false, \"variableNames\": [], \"associatedDocumentUuid\": null, \"compatibilitySourcePlatform\": \"impala\", \"chartLimit\": null, \"progress\": 0, \"chartType\": \"bars\", \"isFetchingData\": false, \"name\": \"\", \"statementTypes\": [\"text\", \"file\"], \"is_redacted\": false, \"currentQueryTab\": \"savedQueries\", \"chartScope\": \"world\", \"result\": {\"statement_id\": 0, \"isMetaFilterVisible\": false, \"meta\": [], \"logLines\": 0, \"id\": \"569ac1f8-ad67-586e-2e1b-e962f63cebd3\", \"logs\": \"\", \"statements_count\": 1, \"rows\": \"289\", \"hasSomeResults\": false, \"filteredMetaChecked\": true, \"hasMore\": false, \"filteredMeta\": [], \"type\": \"table\", \"handle\": {\"log_context\": null, \"statements_count\": 1, \"end\": {\"column\": 55, \"row\": 0}, \"statement_id\": 0, \"has_more_statements\": false, \"start\": {\"column\": 0, \"row\": 0}, \"secret\": \"WaOvWB//QR0AAAAAHYtiqg==\\n\", \"has_result_set\": true, \"session_guid\": \"xAr6SM2cSb+OrjBls7Aljg==\\n\", \"statement\": \"show table stats daily_ipdr_traffic_hdfs_parquet_snappy\", \"operation_type\": 0, \"modified_row_count\": null, \"guid\": \"WaOvWB//QR0AAAAAHYtiqg==\\n\", \"previous_statement_hash\": \"fe89c2392ece8b4f57b6c63a05c22ec90576ecf44f1582dafabb1bc8\"}, \"metaFilter\": \"\", \"explanation\": \"\", \"statement_range\": {\"start\": {\"column\": 0, \"row\": 0}, \"end\": {\"column\": 0, \"row\": 0}}, \"startTime\": \"2017-11-18T17:59:08.547Z\", \"data\": [], \"previous_statement_hash\": null, \"executionTime\": 0, \"fetchedOnce\": false, \"hasResultset\": true, \"endTime\": \"2017-11-18T17:59:08.547Z\"}, \"errors\": [], \"chartMapHeat\": null, \"compatibilitySourcePlatforms\": [{\"name\": \"Teradata\", \"value\": \"teradata\"}, {\"name\": \"Oracle\", \"value\": \"oracle\"}, {\"name\": \"Netezza\", \"value\": \"netezza\"}, {\"name\": \"Impala\", \"value\": \"impala\"}, {\"name\": \"Hive\", \"value\": \"hive\"}, {\"name\": \"DB2\", \"value\": \"db2\"}, {\"name\": \"Greenplum\", \"value\": \"greenplum\"}, {\"name\": \"MySQL\", \"value\": \"mysql\"}, {\"name\": \"PostgreSQL\", \"value\": \"postgresql\"}, {\"name\": \"Informix\", \"value\": \"informix\"}, {\"name\": \"SQL Server\", \"value\": \"sqlserver\"}, {\"name\": \"Sybase\", \"value\": \"sybase\"}, {\"name\": \"Access\", \"value\": \"access\"}, {\"name\": \"Firebird\", \"value\": \"firebird\"}, {\"name\": \"ANSISQL\", \"value\": \"ansisql\"}, {\"name\": \"Generic\", \"value\": \"generic\"}], \"aceErrorsHolder\": [], \"showOptimizer\": false, \"compatibilityTargetPlatform\": \"impala\", \"jobs\": [], \"statementType\": \"text\", \"variableValues\": {}, \"isCanceling\": false, \"queriesTotalPages\": 1, \"formatEnabled\": true, \"properties\": {\"settings\": []}, \"aceErrors\": [], \"externalStatementLoaded\": false, \"chartScatterSize\": null, \"chartYSingle\": null, \"suggestion\": \"\", \"statementPath\": \"\", \"showLongOperationWarning\": false, \"chartX\": \"creation_date_pk\", \"lastExecuted\": 1511027948539, \"variables\": [], \"showChart\": false, \"isResultSettingsVisible\": false, \"showGrid\": true, \"pinnedContextTabs\": [], \"viewSettings\": {\"sqlDialect\": true, \"placeHolder\": \"Example: SELECT * FROM tablename, or press CTRL + space\"}, \"statementsList\": [\"\\n\\n/* Refresh and stats */\\nREFRESH daily_ipdr_traffic_parquet_snappy;\", \"\\nCOMPUTE STATS daily_ipdr_traffic_parquet_snappy;\", \"\\nSHOW TABLE STATS daily_ipdr_traffic_parquet_snappy;\", \"\\n\\n/* Create a new table stored as parquet with gzip compression */\\nDROP TABLE IF EXISTS daily_ipdr_traffic_parquet_gzip;\", \"\\nCREATE TABLE IF NOT EXISTS daily_ipdr_traffic_parquet_gzip\\n    LIKE daily_ipdr_traffic_csv\\n    STORED AS PARQUET\\n    LOCATION 's3a://sgupta-s3/shaw/gzip';\", \"\\n\\n/* Load data into parquet format */\\nSET COMPRESSION_CODEC=gzip;\", \"\\nINSERT INTO daily_ipdr_traffic_parquet_gzip PARTITION (creation_date_pk)\\nSELECT * FROM daily_ipdr_traffic_csv;\", \"\\n\\n/* Refresh and stats */\\nREFRESH daily_ipdr_traffic_parquet_gzip;\", \"\\nCOMPUTE STATS daily_ipdr_traffic_parquet_gzip;\", \"\\nSHOW TABLE STATS daily_ipdr_traffic_parquet_gzip;\", \"\\n\\n/* Sample Query */\\nSELECT creation_date,\\n    AVG(bytes_upstream) as avg_upstream,\\n    AVG(bytes_downstream) as avg_downstream\\nFROM daily_ipdr_traffic_hdfs_parquet_snappy\\nWHERE creation_date=cast('2017-10-16' as timestamp)\\n    AND cmtsdevice = 'dx10sj.wp'\\nGROUP BY creation_date\\nORDER BY avg_upstream DESC;\"], \"lastAceSelectionRowOffset\": 93, \"executingBlockingOperation\": null, \"errorsKlass\": \"results impala alert alert-error\", \"statement\": \"\\n\\n/* Sample Query */\\nSELECT creation_date,\\n    AVG(bytes_upstream) as avg_upstream,\\n    AVG(bytes_downstream) as avg_downstream\\nFROM daily_ipdr_traffic_hdfs_parquet_snappy\\nWHERE creation_date=cast('2017-10-16' as timestamp)\\n    AND cmtsdevice = 'dx10sj.wp'\\nGROUP BY creation_date\\nORDER BY avg_upstream DESC;\", \"type\": \"impala\", \"chartSorting\": \"none\", \"previousChartOptions\": {\"chartTimelineType\": \"bar\", \"chartSorting\": \"none\", \"chartLimit\": null, \"chartMapHeat\": null, \"chartX\": \"creation_date_pk\", \"chartMapType\": \"marker\", \"chartYMulti\": [\"#Files\"], \"chartScatterSize\": null, \"chartScope\": \"world\", \"chartMapLabel\": null, \"chartScatterGroup\": null, \"chartYSingle\": null, \"chartXPivot\": null}, \"aceWarningsHolder\": [], \"resultsKlass\": \"results impala\", \"chartTimelineType\": \"bar\", \"compatibilityTargetPlatforms\": [{\"name\": \"Impala\", \"value\": \"impala\"}, {\"name\": \"Hive\", \"value\": \"hive\"}], \"topRisk\": null, \"hasCurlyBracketParameters\": true, \"chartScatterGroup\": null, \"settingsVisible\": false, \"queriesFilterVisible\": false, \"aceWarnings\": [], \"compatibilityCheckRunning\": false, \"isLoading\": false, \"loadingQueries\": false, \"hasDataForChart\": true, \"id\": \"6fdce974-82ae-b93d-2bf0-7682733f0c72\", \"aceSize\": 100, \"chartData\": [], \"queriesHasErrors\": false, \"chartMapLabel\": null, \"status\": \"expired\", \"isSqlDialect\": true, \"chartMapType\": \"marker\", \"queriesFilter\": \"\", \"queriesCurrentPage\": 1, \"isBatchable\": true, \"chartYMulti\": [\"#Files\"], \"dbSelectionVisible\": false, \"database\": \"shaw\", \"hasSuggestion\": null, \"chartXPivot\": null, \"checkStatusTimeout\": null}], \"uuid\": \"60d52f80-b603-b526-ea84-4dc8abda122d\", \"onSuccessUrl\": null, \"is_history\": false, \"historyFilterVisible\": false, \"retryModalConfirm\": null, \"selectedSnippet\": \"impala\", \"type\": \"query-impala\", \"historyFilter\": \"\", \"description\": \"\", \"sessions\": [{\"http_addr\": \"http://ip-10-0-0-106.us-west-2.compute.internal:25000\", \"type\": \"impala\", \"id\": 4, \"properties\": [{\"multiple\": true, \"defaultValue\": [], \"value\": [], \"nice_name\": \"Settings\", \"key\": \"settings\", \"help_text\": \"Impala configuration properties.\", \"type\": \"settings\", \"options\": [\"debug_action\", \"explain_level\", \"mem_limit\", \"optimize_partition_key_scans\", \"query_timeout_s\", \"request_pool\"]}]}], \"updateHistoryFailed\": false, \"isSaved\": true, \"presentationSnippets\": {}, \"isBatchable\": true, \"isHistory\": false, \"coordinatorUuid\": null, \"name\": \"Create S3 Tables\", \"isManaged\": false, \"loadingScheduler\": false, \"parentSavedQueryUuid\": \"60d52f80-b603-b526-ea84-4dc8abda122d\", \"viewSchedulerId\": \"\", \"historyCurrentPage\": 1, \"creatingSessionLocks\": [], \"directoryUuid\": \"\", \"unloaded\": false, \"dependentsCoordinator\": []}", 
    "is_trashed": false, 
    "name": "Create S3 Tables"
  }
}
]
